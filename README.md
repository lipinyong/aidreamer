# Aidreamer - å¾®æœåŠ¡å¹³å°

ä½¿ç”¨ Python + FastAPI æ„å»ºçš„å¾®æœåŠ¡æ¶æ„å¹³å°ï¼Œæ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²å’Œç®¡ç†ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

Aidreamer æ˜¯ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„çš„ Web ç³»ç»Ÿå¹³å°ï¼Œé‡‡ç”¨ FastAPI æ¡†æ¶å¼€å‘ï¼Œæ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²ã€‚å¹³å°æä¾›åŸºç¡€æœåŠ¡æ¡†æ¶ï¼Œå…¶ä»–å¾®æœåŠ¡å¯ä»¥åŸºäºåŸºç¡€é•œåƒè¿›è¡Œæ‰©å±•å¼€å‘ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å¾®æœåŠ¡åˆ—è¡¨

- **base** - åŸºç¡€æœåŠ¡æ¡†æ¶ï¼Œæä¾› Web æœåŠ¡ã€åå°æœåŠ¡ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä½œä¸ºå…¶ä»–å¾®æœåŠ¡çš„åŸºç¡€é•œåƒ
- **gateway** - ç½‘å…³æœåŠ¡ï¼Œè´Ÿè´£è·¯ç”±è½¬å‘ã€æƒé™æ§åˆ¶ã€åå‘ä»£ç†ï¼Œæä¾›å®¹å™¨æ³¨å†Œå’Œæ³¨é”€æœåŠ¡
- **sessions** - å…¨å±€ä¼šè¯å…±äº«æœåŠ¡ï¼Œå…¶ä»–å®¹å™¨é€šè¿‡æ­¤æœåŠ¡å…±äº«ä¼šè¯
- **ai_node** - AI æœåŠ¡ï¼Œè´Ÿè´£ AI æ¨¡å‹å¯¹æ¥ã€MCP æœåŠ¡ç­‰
- **linux-panel** - Linux é¢æ¿æœåŠ¡ï¼Œè´Ÿè´£æœåŠ¡å™¨å’Œå…³é”®è¿›ç¨‹ç®¡ç†ï¼ŒåŒ…æ‹¬ç›‘æ§ã€æ—¥å¿—ã€æ–‡ä»¶ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰
- **showdoc** - åœ¨çº¿ Markdown æ–‡ä»¶ç®¡ç†ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ã€ç¼–è¾‘ã€é¢„è§ˆç­‰
- **scheduler** - è®¡åˆ’ä»»åŠ¡æœåŠ¡ï¼Œè´Ÿè´£å®šæ—¶ä»»åŠ¡çš„ç®¡ç†ï¼ŒåŒ…æ‹¬æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰

### æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: FastAPI
- **éƒ¨ç½²æ–¹å¼**: Docker + Docker Compose
- **é…ç½®ç®¡ç†**: YAML é…ç½®æ–‡ä»¶
- **ä¼šè¯ç®¡ç†**: Session å­˜å‚¨
- **æƒé™è®¤è¯**: OAuth2 æ”¯æŒ
- **ç¼–ç¨‹è¯­è¨€**: Python 3.11

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- Python 3.11+ (æœ¬åœ°å¼€å‘)
- Git

### å¯åŠ¨ Base æœåŠ¡

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/lipinyong/aidreamer.git
cd aidreamer
```

2. **å¯åŠ¨æœåŠ¡**
```bash
docker-compose up -d baseplatform
```

3. **è®¿é—®æœåŠ¡**
- Web ç•Œé¢: http://127.0.0.1:5000
- å¥åº·æ£€æŸ¥: http://127.0.0.1:5000/health

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **è¿›å…¥ base ç›®å½•**
```bash
cd base
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ .env.example åˆ° .env å¹¶ä¿®æ”¹é…ç½®
cp .env.example .env
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
python start.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
aidreamer/
â”œâ”€â”€ base/                    # åŸºç¡€æœåŠ¡
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒè·¯ç”±å’Œæ–‡ä»¶ç›‘æ§
â”‚   â”œâ”€â”€ etc/                # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”‚   â””â”€â”€ config.yaml     # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ module/             # å…¨å±€ç»„ä»¶ï¼ˆè‡ªåŠ¨åŠ è½½/é‡è½½ï¼‰
â”‚   â”œâ”€â”€ plugin/             # æ’ä»¶ç›®å½•ï¼ˆè‡ªåŠ¨åŠ è½½/é‡è½½ï¼‰
â”‚   â”œâ”€â”€ service/            # åå°æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ cron/           # è®¡åˆ’ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ datasource/     # æ•°æ®æºæœåŠ¡
â”‚   â”‚   â””â”€â”€ jsonserv/       # JSON Mock æœåŠ¡
â”‚   â”œâ”€â”€ web/                # Web é¡µé¢å’Œ API
â”‚   â”œâ”€â”€ Dockerfile          # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â””â”€â”€ requirements.txt    # Python ä¾èµ–
â”œâ”€â”€ gateway/                # ç½‘å…³æœåŠ¡ï¼ˆå¾…å¼€å‘ï¼‰
â”œâ”€â”€ sessions/               # ä¼šè¯æœåŠ¡ï¼ˆå¾…å¼€å‘ï¼‰
â”œâ”€â”€ ai_node/                # AI æœåŠ¡ï¼ˆå¾…å¼€å‘ï¼‰
â”œâ”€â”€ linux-panel/            # Linux é¢æ¿æœåŠ¡ï¼ˆå¾…å¼€å‘ï¼‰
â”œâ”€â”€ scheduler/              # è®¡åˆ’ä»»åŠ¡æœåŠ¡ï¼ˆå¾…å¼€å‘ï¼‰
â”œâ”€â”€ showdoc/                # Markdown æ–‡æ¡£æœåŠ¡
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## âš™ï¸ é…ç½®è¯´æ˜

### Base æœåŠ¡é…ç½®

é…ç½®æ–‡ä»¶ä½ç½®: `base/etc/config.yaml`

ä¸»è¦é…ç½®é¡¹ï¼š

```yaml
app:
  name: FastAPI Base Platform
  version: 1.0.0
  debug: false

server:
  host: 0.0.0.0
  port: 5000
  reload: false

security:
  api_auth_enabled: false  # æ˜¯å¦å¯ç”¨ API è®¤è¯
  secret_key: ${SECRET_KEY}
  algorithm: HS256

oauth2:
  enabled: false  # æ˜¯å¦å¯ç”¨ OAuth2 ç™»å½•
  server:
    host: sso.example.com
    protocol: HTTPS
    authorize_path: /oauth/v2/authorize
    token_path: /oauth/v2/token
    userinfo_path: /oauth/v2/me
  client:
    client_id: ""
    client_secret: ""
    callback_url: ""
```

### OAuth2 é…ç½®

è®¿é—® http://127.0.0.1:5000/oauth2/index.html è¿›è¡Œ OAuth2 é…ç½®ã€‚

## ğŸ”Œ API æ¥å£

### æ ¸å¿ƒ API

- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /raw/{path}` - è¯»å–æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆæ”¯æŒ web/ å’Œ etc/ ç›®å½•ï¼‰
- `GET /tree/{path}` - è·å–ç›®å½•æ ‘ç»“æ„
- `GET /api/{path}` - åŠ¨æ€ API æ‰§è¡Œï¼ˆæŸ¥æ‰¾ web/{path}.py å¹¶æ‰§è¡Œï¼‰
- `POST /api/config/oauth2` - ä¿å­˜ OAuth2 é…ç½®

### åŠ¨æ€è·¯ç”±

- åœ¨ `web/` ç›®å½•ä¸‹åˆ›å»º `.py` æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨æ³¨å†Œä¸º API è·¯ç”±
- åœ¨ `web/` ç›®å½•ä¸‹åˆ›å»º `.html` æˆ– `.md` æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ URL ç›´æ¥è®¿é—®

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. **åœ¨ `module/` ç›®å½•ä¸‹åˆ›å»º Python æ–‡ä»¶**
2. æ¨¡å—ä¼šè‡ªåŠ¨åŠ è½½å’Œé‡è½½ï¼ˆæ–‡ä»¶ç›‘æ§ï¼‰

### æ·»åŠ æ’ä»¶

1. **åœ¨ `plugin/` ç›®å½•ä¸‹åˆ›å»ºæ’ä»¶æ–‡ä»¶**
2. æ’ä»¶ä¼šè‡ªåŠ¨åŠ è½½å’Œé‡è½½

### æ·»åŠ åå°æœåŠ¡

1. **åœ¨ `service/` ç›®å½•ä¸‹åˆ›å»ºæœåŠ¡ç›®å½•**
2. å®ç°æœåŠ¡é€»è¾‘
3. åœ¨ `main.py` ä¸­æ³¨å†ŒæœåŠ¡

### æ·»åŠ  Web é¡µé¢

1. **åœ¨ `web/` ç›®å½•ä¸‹åˆ›å»º HTML æˆ– Markdown æ–‡ä»¶**
2. é€šè¿‡ URL ç›´æ¥è®¿é—®ï¼Œä¾‹å¦‚: `web/example/index.html` â†’ `http://127.0.0.1:5000/example/index.html`

### æ·»åŠ åŠ¨æ€ API

1. **åœ¨ `web/` ç›®å½•ä¸‹åˆ›å»º `.py` æ–‡ä»¶**
2. å®ç° `handle(request)` å‡½æ•°
3. é€šè¿‡ `/api/{path}` è®¿é—®

## ğŸ³ Docker éƒ¨ç½²

### æ„å»ºé•œåƒ

```bash
docker-compose build baseplatform
```

### å¯åŠ¨æœåŠ¡

```bash
docker-compose up -d baseplatform
```

### æŸ¥çœ‹æ—¥å¿—

```bash
docker logs -f baseplatform
```

### åœæ­¢æœåŠ¡

```bash
docker-compose down baseplatform
```

## ğŸ“ åŠŸèƒ½ç‰¹æ€§

### Base æœåŠ¡

- âœ… FastAPI Web æ¡†æ¶
- âœ… åŠ¨æ€è·¯ç”±æ³¨å†Œ
- âœ… æ–‡ä»¶ç›‘æ§å’Œè‡ªåŠ¨é‡è½½
- âœ… Markdown æ¸²æŸ“
- âœ… é…ç½®ç®¡ç†ï¼ˆYAML + ç¯å¢ƒå˜é‡ï¼‰
- âœ… æ’ä»¶ç³»ç»Ÿ
- âœ… æ¨¡å—ç³»ç»Ÿ
- âœ… åå°æœåŠ¡ï¼ˆCronã€æ•°æ®æºã€JSON Mockï¼‰
- âœ… OAuth2 é…ç½®ç®¡ç†
- âœ… å¥åº·æ£€æŸ¥
- âœ… æ—¥å¿—ç®¡ç†

### è®¡åˆ’åŠŸèƒ½

- ğŸ”„ Gateway ç½‘å…³æœåŠ¡
- ğŸ”„ Sessions ä¼šè¯æœåŠ¡
- ğŸ”„ AI Node æœåŠ¡
- ğŸ”„ Linux Panel æœåŠ¡
- ğŸ”„ Scheduler è®¡åˆ’ä»»åŠ¡æœåŠ¡

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

- GitHub: [@lipinyong](https://github.com/lipinyong)
- é¡¹ç›®åœ°å€: https://github.com/lipinyong/aidreamer

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**æ³¨æ„**: æœ¬é¡¹ç›®æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å°šæœªå®Œæˆã€‚è¯·æŸ¥çœ‹å„å¾®æœåŠ¡çš„ `requirements.md` äº†è§£è¯¦ç»†éœ€æ±‚ã€‚
